typeof sircl=="undefined"&&console.warn("The file 'sircl-changeactions' component should be registered after the 'sircl' component. Please review order of script files.");sircl.disableOnAction=!1;sircl._changeActionHandlers={};sircl._changeActionHandlers.beforeSend=[];sircl._changeActionHandlers.afterSend=[];sircl._changeActionHandlers.onError=[];sircl._changeActionHandlers.beforeRender=[];sircl._changeActionHandlers.afterRender=[];sircl.addChangeActionHandler=function(n,t){sircl._changeActionHandlers[n].push(t)};sircl._runChangeActionHandlers=function(n,t,i){sircl._changeActionHandlers[n].forEach(function(n){n.apply(t,[i])})};sircl._actionCall=function(n,t,i,r,u,f,e,o,s,h,c){var w,a,b,y,p,k,l,nt;if(!($(e.target).closest(".sircl-content-processing").length>0)){var d=($(n).closest("[method]").attr("method")||"get").toUpperCase()=="POST"?"POST":"GET",g=new RegExp(/\%5B[a-z0-9\.\-\_]+?\%5D/gi),v=[];do if(w=g.exec(r),w!==null)v.push(w[0]);else break;while(1);for(a=0;a<v.length;a++)b=$("[name="+v[a].substr(3,v[a].length-6)+"]").val(),r=b===undefined?r.replace(v[a],""):r.replace(v[a],encodeURIComponent(b));for((f===null||f===undefined)&&(f=[]),Array.isArray(f)||(f=[f]),y="name="+encodeURIComponent(u),p=0;p<f.length;p++)y+="&value="+encodeURIComponent(f[p]),u!=""&&(y+="&"+encodeURIComponent(u)+"="+encodeURIComponent(f[p]));d==="GET"&&(r=r+(r.indexOf("?")<0?"?":"&")+y,y=null);k=!1;$(n).attr("browser-cache")!=null&&(k=$(n).attr("browser-cache").toLowerCase()=="on");l={$trigger:$(n),$subjects:t,$scope:i,event:e};nt=$.ajax({url:r,method:d,data:y,cache:k,beforeSend:function(t){l.xhr=t;sircl._runChangeActionHandlers("beforeSend",n,l)}}).done(function(t,i,r){l.succeeded=l.xhr.status<=299?!0:!1;l.data=t;sircl._runChangeActionHandlers("afterSend",n,l);sircl._runChangeActionHandlers("beforeRender",n,l);l.succeeded||sircl._runChangeActionHandlers("onError",n,l);l.succeeded?(r.getResponseHeader("Content-Type")||"").indexOf("text/html")==0?s&&s.apply(n,[l]):o&&o.apply(n,[l]):h&&h.apply(n);sircl._runChangeActionHandlers("afterRender",n,l);l.succeeded||sircl.handleError("S101","Change action request failed.",l)}).fail(function(t){l.succeeded=!1;l.data=null;sircl._runChangeActionHandlers("afterSend",n,l);sircl._runChangeActionHandlers("beforeRender",n,l);l.succeeded||sircl._runChangeActionHandlers("onError",n,l);l.succeeded?(t.getResponseHeader("Content-Type")||"").indexOf("text/html")==0?s&&s.apply(n,[l]):o&&o.apply(n,[l]):h&&h.apply(n);sircl._runChangeActionHandlers("afterRender",n,l);l.succeeded||sircl.handleError("S101","Change action request failed.",l)}).always(function(){c&&c.apply(n)})}};$(function(){$(document.body).on("change","INPUT[type=radio][onchange-action]",function(n){var t=$(this);sircl._actionCall(this,t,t,t.attr("onchange-action"),this.name,t.prop("checked"),n,function(){this._previousActionValue=t.prop("checked")},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){t.prop("checked",!t.prop("checked"))})});$(document.body).on("change","[onchange-action] INPUT[type=radio]:not([onchange-action])",function(n){var r=$(this),i=r.closest("[onchange-action]"),t=i.find("INPUT[type=radio][name="+this.name+"]:not([onchange-action])");sircl._actionCall(this,t,i,i.attr("onchange-action"),this.name,jQuery.makeArray(t.filter(":checked")).map(function(n){return n.value}),n,function(n){var i=n.data;Array.isArray(i)&&i.length>0&&(i=i[0]);i===undefined?t[0]._previousActionValue=this.value:i==null||i==""?(t.prop("checked",!1),t[0]._previousActionValue=null):(t.filter("[value="+i+"]").prop("checked",!0),t[0]._previousActionValue=i)},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){var n=i.find("INPUT[type=radio][name="+this.name+"]:not([onchange-action]):first")[0]._previousActionValue;n?i.find("INPUT[type=radio][name="+this.name+"][value="+n+"]:not([onchange-action])").prop("checked",!0):i.find("INPUT[type=radio][name="+this.name+"]:not([onchange-action])").prop("checked",!1)})});$(document.body).on("change","INPUT[type=checkbox][onchange-action]",function(n){var t=$(this);sircl._actionCall(this,t,t,t.attr("onchange-action"),this.name,t.prop("checked"),n,function(){this._previousActionValue=t.prop("checked")},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){t.prop("checked",!t.prop("checked"))})});$(document.body).on("change","[onchange-action] INPUT[type=checkbox]:not([onchange-action])",function(n){var t=$(this),i=t.closest("[onchange-action]"),r=i.find("INPUT[type=checkbox][name="+this.name+"]:not([onchange-action])");sircl._actionCall(this,r,i,i.attr("onchange-action"),this.name,jQuery.makeArray(i.find("INPUT[type=checkbox][name="+this.name+"]:checked:not([onchange-action])")).map(function(n){return n.value}),n,function(n){var i=n.data;typeof i=="string"&&(i=[i]);Array.isArray(i)?r.each(function(){var n=i.indexOf(this.value)>=0;$(this).prop("checked",n);this._previousActionValue=n}):this._previousActionValue=t.prop("checked")},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){t.prop("checked",!t.prop("checked"))})});$(document.body).on("change","INPUT[onchange-action]:not([type=checkbox]):not([type=radio]), [onchange-action] INPUT:not([type=checkbox]):not([type=radio]):not([onchange-action]), SELECT[onchange-action], [onchange-action] SELECT:not([onchange-action]), TEXTAREA[onchange-action], [onchange-action] TEXTAREA:not([onchange-action])",function(n){var t=$(this),i=t.closest("[onchange-action]");sircl._actionCall(this,t,i,i.attr("onchange-action"),this.name,t.val(),n,function(n){var i=n.data;i&&t.val(i);this._previousActionValue=t.val()},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){t.val(this._previousActionValue)})});$(document.body).on("focusin","INPUT[onfocusin-action]:not([type=checkbox]):not([type=radio]), [onfocusin-action] INPUT:not([type=checkbox]):not([type=radio]):not([onfocusout-action]), TEXTAREA[onfocusin-action], [onfocusin-action] TEXTAREA:not([onfocusout-action])",function(n){var t=$(this),i=t.closest("[onfocusin-action]");sircl._actionCall(this,t,i,i.attr("onfocusin-action"),this.name,t.val(),n,function(n){var i=n.data;if(i){t.val(i);try{this.select()}catch(r){}}},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)})});$(document.body).on("focusout","INPUT[onfocusout-action]:not([type=checkbox]):not([type=radio]), [onfocusout-action] INPUT:not([type=checkbox]):not([type=radio]):not([onfocusout-action]), TEXTAREA[onfocusout-action], [onfocusout-action] TEXTAREA:not([onfocusout-action])",function(n){var t=$(this),i=t.closest("[onfocusout-action]");sircl._actionCall(this,t,i,i.attr("onfocusout-action"),this.name,t.val(),n,function(n){var i=n.data;i&&t.val(i)},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)})})});$$(function(){$(this).find("INPUT[onchange-action]").each(function(){this._previousActionValue=$(this).is("[type=radio]")?$(this).prop("checked"):$(this).is("[type=checkbox]")?$(this).prop("checked"):$(this).val()});$(this).find("[onchange-action] INPUT:not([onchange-action])").each(function(){var n=$(this).closest("[onchange-action]");$(this).is("[type=radio]")?n.find("INPUT[type=radio][name="+this.name+"]:not([onchange-action]):first")[0]._previousActionValue=$("INPUT[type=radio][name="+this.name+"]:not([onchange-action]):checked").val():this._previousActionValue=$(this).is("[type=checkbox]")?$(this).prop("checked"):$(this).val()});$(this).find("TEXTAREA[onchange-action], [onchange-action] TEXTAREA:not([onchange-action])").each(function(){this._previousActionValue=$(this).val()});$(this).find("SELECT[onchange-action], [onchange-action] SELECT:not([onchange-action])").each(function(){this._previousActionValue=$(this).val()})});sircl.addChangeActionHandler("afterSend",function(n){var t=n.xhr.getResponseHeader("X-Sircl-Alert-Message");t&&sircl.ext.alert(n.$trigger,t,null,!0)});sircl.addChangeActionHandler("beforeSend",function(n){n._elemetsDisabled=sircl.disableOnAction&&n.event.type!="focusin"&&n.event.type!="focusout"&&n.event.type!="input"?n.$subjects.filter(":not(:disabled)"):$(null);n._elemetsDisabled.prop("disabled",!0)});sircl.addChangeActionHandler("afterSend",function(n){n._elemetsDisabled.prop("disabled",!1)});sircl.addChangeActionHandler("beforeSend",function(n){n.$scope.addClass("action-pending")});sircl.addChangeActionHandler("afterSend",function(n){n.$scope.removeClass("action-pending")});