function SirclRequestProcessor(n){this._steps=[];this._steps=this._steps.concat(sircl._requestHandlers.beforeSend);this._sendIndex=this._steps.length;this._steps.push(this._send);this._steps=this._steps.concat(sircl._requestHandlers.afterSend);this._processIndex=this._steps.length;this._steps.push(this._process);this._steps=this._steps.concat(sircl._requestHandlers.beforeRender);this._renderIndex=this._steps.length;this._steps.push(this._render);this._steps=this._steps.concat(sircl._requestHandlers.afterRender);this._loadComplete=n}function $$(){arguments.length>=2?sircl.addContentReadyHandler(arguments[0],arguments[1]):sircl.addContentReadyHandler("process",arguments[0])}typeof jQuery=="undefined"&&console.error("Sircl requires jQuery to be executed before Sircl libraries. Please add the jQuery script or move it before Sircl scripts.");sircl_originalSubmit=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(n){if(sircl.ext.isInternalTarget(this.getAttribute("target")||"*")===!1){sircl_originalSubmit.apply(this,arguments);return}var t=this._formTrigger?$(this._formTrigger):$(this);sircl._submitForm(t,$(this),n)};sircl_originalJqHtml=$.fn.html;$.fn.html=function(n){var t=this;if(n===undefined)return sircl_originalJqHtml.call(t);t.each(function(){sircl._beforeUnload(this)});sircl_originalJqHtml.call(t,n);n!==null&&t.each(function(){sircl._afterLoad(this)})};sircl_originalJqLoad=$.fn.load;$.fn.load=function(n,t,i){var r={$trigger:$(this),$initialTarget:$(this),action:n,method:"get",enctype:null,formData:t};sircl._processRequest(r,i)};$.fn.hasAttr=function(n){return this.attr(n)!==undefined};typeof sircl=="undefined"&&(sircl={});sircl.version=2;console.info("Sircl v."+sircl.version+" running.");sircl.html_spinner='<i class="sircl-spinner sircl-spinning"><\/i> ';sircl.$mainTargetSelector=".main-target";sircl.ext={};sircl.ext.firstOrNull=function(n){return n?n.length>0?n[0]:null:null};sircl.ext.visible=function(n,t){if(t===undefined)return!$(n).hasAttr("hidden");t?$(n).removeAttr("hidden"):$(n).attr("hidden","hidden")};sircl.ext.getId=function(n,t){var r=$(n),i;return r.length>0?(i=r[0].id,(i===""||i===undefined)&&t===!0&&(i=r[0].id="id-"+(new Date).getTime()),i):null};sircl.ext.$mainTarget=function(){return $(sircl.$mainTargetSelector)};sircl.ext.isInternalTarget=function(n){if(n==null||n.length==0)return!1;switch(n.charAt(0)){case"#":return!0;case".":return!0;case"*":return!0;case":":return!0;case"<":return!0;case">":return!0;case"&":return!0;case"[":return!0;case" ":return!0;default:return!1}};sircl.ext.isExternalTarget=function(n){return!sircl.ext.isInternalTarget(n)};sircl.ext.$select=function(n,t){var f,e,r,u,i;if(t===undefined||t===null)return $([]);if(t.indexOf("|")>=0&&t.indexOf("|=")<t.indexOf("|"))return f=t.indexOf("|"),sircl.ext.$select(sircl.ext.$select(n,t.substr(0,f)),t.substr(f+1));for(e=t.split(","),r=$([]),u=0;u<e.length;u++)i=e[u].trim(),i.length==0||(r=i===":this"?r.add(n):i===":form"?n.hasAttr("form")?r.add(sircl.ext.$select(n,n.attr("form"))):r.add(n.closest("FORM")):i.indexOf(">")===0?r.add(n.find(i.substr(1))):i.indexOf("&gt;")===0?r.add(n.find(i.substr(4))):i.indexOf("<")===0?r.add(n.closest(i.substr(1))):i.indexOf("&lt;")===0?r.add(n.closest(i.substr(4))):r.add($(i)));return r};sircl.ext.cssEscape=function(n){try{return CSS.escape(n)}catch(t){return n.replace(/\./g,"\\.").replace(/\,/g,"\\.").replace(/\:/g,"\\.").replace(/\*/g,"\\.").replace(/\#/g,"\\.").replace(/\(/g,"\\.").replace(/\)/g,"\\.").replace(/\[/g,"\\[").replace(/\]/g,"\\]")}};sircl.ext.scopedDo=function(n,t,i){var r=null;t.split(",").forEach(function(t){var u=t.split(" on ").map(function(n){return n.trim()});u.length===1?r==null?i(n,u[0]):i(sircl.ext.$select(n,u[0]),r):i(sircl.ext.$select(n,u[1]),r=u[0])})};sircl.ext.addClass=function(n,t){sircl.ext.scopedDo(n,t,function(n,t){n.addClass(t)})};sircl.ext.removeClass=function(n,t){sircl.ext.scopedDo(n,t,function(n,t){n.removeClass(t)})};sircl.ext.toggleClass=function(n,t){sircl.ext.scopedDo(n,t,function(n,t){n.toggleClass(t)})};sircl.ext.alert=function(n,t){window.alert(t)};sircl.ext.confirm=function(n,t){return window.confirm(t)?!0:!1};sircl.ext.getUrlParameter=function(n){n=n.replace(/[\[]/g,"\\[").replace(/[\]]/g,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))};sircl.urlParser=/^(.*?)(\?.*?)?(\#.*)?$/;sircl._requestHandlers={};sircl._requestHandlers.beforeSend=[];sircl._requestHandlers.afterSend=[];sircl._requestHandlers.onError=[];sircl._requestHandlers.beforeRender=[];sircl._requestHandlers.afterRender=[];sircl.addRequestHandler=function(n,t){this._requestHandlers[n].push(t)};sircl._loadUrl=function(n,t,i){var r={$trigger:n,action:t,method:"get",accept:n.attr("type")};this._processRequest(r,i)};sircl._submitForm=function(n,t,i,r){var u={$form:t,$trigger:n,event:i,action:n.attr("formaction")||t.attr("action")||window.location.href,method:(n.attr("formmethod")||t.attr("method")||"get").toLowerCase(),enctype:(n.attr("formenctype")||t.attr("enctype")||"application/x-www-form-urlencoded").toLowerCase(),charset:t.attr("accept-charset"),getAttr:function(n){return this.$trigger.attr(n)||this.$form.attr(n)}},f;n.hasAttr("formtarget")&&(u.$initialTarget=sircl.ext.$select(n,n.attr("formtarget")));u.method=="post"?u.enctype=="multipart/form-data"?(u.formData=new FormData(t[0]),n!=null&&n.attr("name")!=null&&u.formData.append(n.attr("name"),n.attr("value"))):u.enctype=="text/plain"?(u.formData=t.serialize(),n!=null&&n.attr("name")!=null&&(u.formData=encodeURIComponent(n.attr("name"))+"="+encodeURIComponent(n.attr("value"))+"&"+u.formData)):(u.formData=t.serialize(),n!=null&&n.attr("name")!=null&&(u.formData=encodeURIComponent(n.attr("name"))+"="+encodeURIComponent(n.attr("value"))+"&"+u.formData)):(f=sircl.urlParser.exec(u.action),u.action=f[1]+(f[2]?f[2]+"&":"?")+t.serialize()+(f[3]?f[3]:""),u.formData=null);this._processRequest(u,r)};sircl._processRequest=function(n,t){var i,r,u;(n.$initialTarget==null||n.$initialTarget.length==0)&&n.$trigger!=null&&n.$trigger.length>0&&(i=n.$trigger.closest("[target]"),i.length>0&&(n.$initialTarget=sircl.ext.$select(i,i.attr("target"))));(n.$initialTarget==null||n.$initialTarget.length==0)&&(n.$initialTarget=sircl.ext.$mainTarget());n.$finalTarget=n.$initialTarget;n.targetHasChanged=!1;n.getAttr==null&&(n.getAttr=function(n){return this.$trigger!=null?this.$trigger.attr(n):null});r=!1;n.$trigger!=null&&n.$trigger.attr("browser-cache")!=null?r=n.$trigger.attr("browser-cache").toLowerCase()=="on":n.$form!=null&&n.$form.attr("browser-cache")!=null&&(r=n.$form.attr("browser-cache").toLowerCase()=="on");n.xhr=new XMLHttpRequest;n.xhr.open(n.method,n.action);typeof n.formData=="object"||(n.enctype==null&&n.charset==null?n.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):n.enctype==null&&n.charset!=null?n.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset="+n.charset):n.enctype!=null&&n.charset==null?n.xhr.setRequestHeader("Content-Type",n.enctype):n.xhr.setRequestHeader("Content-Type",n.enctype+"; charset="+rec.charset));r==!1&&(n.xhr.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),n.xhr.setRequestHeader("Pragma","no-cache"));n.xhr.setRequestHeader("Accept",n.accept?n.accept:"text/html");n.xhr.setRequestHeader("X-Sircl-Request-Type","Partial");u=new SirclRequestProcessor(t);u.next(n)};SirclRequestProcessor.prototype.send=function(n){if(arguments.length==0)return this._steps[this._sendIndex];this._steps[this._sendIndex]=n};SirclRequestProcessor.prototype.process=function(n){if(arguments.length==0)return this._steps[this._processIndex];this._steps[this._processIndex]=n};SirclRequestProcessor.prototype.render=function(n){if(arguments.length==0)return this._steps[this._renderIndex];this._steps[this._renderIndex]=n};SirclRequestProcessor.prototype._send=function(n){var t=this;if(n.abort==!0){n.succeeded=!1;n.aborted=!0;t.next(n);return}n.xhr.addEventListener("abort",function(i){n.loadEvent=i;n.status=n.xhr.status;n.statusText=n.xhr.statusText;n.responseText=n.xhr.responseText;n.aborted=!0;n.succeeded=!1;t.next(n)});n.xhr.addEventListener("error",function(i){n.loadEvent=i;n.status=n.xhr.status;n.statusText=n.xhr.statusText;n.responseText=n.xhr.responseText;n.aborted=!1;n.succeeded=!1;t.next(n)});n.xhr.addEventListener("load",function(i){var e,u,r,f;n.loadEvent=i;n.status=n.xhr.status;n.statusText=n.xhr.statusText;n.responseText=n.xhr.responseText;e=n.xhr.getResponseHeader("X-Sircl-Load");e!=null&&$(e).filter("[onload-load]").each(function(){$(this).load($(this).attr("onload-load"))});u=n.xhr.getResponseHeader("Location");u!==null?n.xhr.getResponseHeader("X-Sircl-Target")=="_self"?window.location.href=u:(n.redirects===undefined&&(n.redirects=0),n.redirects++,n.redirects>20?(sircl.handleError("S104","Too many redirects.",n),n.aborted=!0,n.succeeded=!1,t.next(n)):(n.action=u,n.method="get",n.xhr.open(n.method,n.action),n.xhr.setRequestHeader("Accept",n.accept?n.accept:"text/html"),n.xhr.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),n.xhr.setRequestHeader("Pragma","no-cache"),n.xhr.setRequestHeader("X-Sircl-Request-Type","Partial"),n.xhr.send())):(r=n.xhr.getResponseHeader("X-Sircl-Target"),r=="_self"?n.method=="get"?(n.$finalTarget=null,n.targetHasChanged=!0):console.warn("X-Sircl-Target response header value '_self' is only vaid for 'get' requests."):r=="main"?(n.$finalTarget=sircl.ext.$mainTarget(),n.targetHasChanged=!0):r!=null&&(n.$finalTarget=sircl.ext.$select(n.$trigger,r),n.targetHasChanged=!0),n.documentTitle=n.xhr.getResponseHeader("X-Sircl-Document-Title"),n.alertMsg=n.xhr.getResponseHeader("X-Sircl-Alert-Message"),f=n.xhr.getResponseHeader("X-Sircl-History"),f=="back"?n.action="history:back":f=="back-uncached"?n.action="history:back-uncached":f=="refresh"&&(n.action="history:refresh"),n.historyReplace=n.xhr.getResponseHeader("X-Sircl-History-Replace"),n.xhr.status<=299?(n.aborted=!1,n.succeeded=!0,t.next(n)):(n.aborted=!1,n.succeeded=!1,t.error(n)))});n.xhr.send(n.formData)};SirclRequestProcessor.prototype._process=function(n){if(n.historyReplace){var t=window.history.state;t!=null&&(t.url=n.historyReplace);window.history.replaceState(t,document.title,n.historyReplace)}n.alertMsg&&sircl.ext.alert(n.$trigger,n.alertMsg,null,!1);n.succeeded?n.action=="history:back"?window.history.back():n.action=="history:back-uncached"?(sircl.ext.$mainTarget().addClass("sircl-history-nocache-once"),window.history.back()):n.action=="history:refresh"?sircl.singlePageMode==!1||n.$finalTarget==null?window.location.href=n.action:sircl._processRequest({$trigger:null,$initialTarget:sircl.ext.$mainTarget(),action:window.location.href,method:"get",_historyMode:"skip"}):n.status!="204"&&this.next(n):sircl.handleError("S100","Error processing request.",n)};SirclRequestProcessor.prototype._render=function(n){var t=n.$finalTarget,i=n.responseText,r=n.getAttr("sub-target"),f=n.$finalTarget.find(r),e,u;r!=null&&f.length>0&&(e=$("<div/>").append(n.responseText),u=e.find(r).html(),u!=null&&(t=f,i=u));n.documentTitle!=null&&(window.document.title=n.documentTitle);n.renderMode=n.xhr.getResponseHeader("X-Sircl-Render-Mode");n.renderMode==="append"?(t.append(i),t.each(function(){sircl._afterLoad(this)})):t.html(i);n.$finalTarget.each(function(){sircl.ext.visible(this,!0)});this.next(n)};SirclRequestProcessor.prototype.next=function(n){if(this._steps.length>0){var i=this._steps[0];this._steps.splice(0,1);try{i.apply(this,arguments)}catch(t){console.error(t);sircl.handleError("S100","Error executing a RequestProcessor step: "+t,{exception:t,fx:i});this.next(n)}}else this._loadComplete&&this._loadComplete(n.xhr.responseText,n.xhr.statusText,n.xhr)};SirclRequestProcessor.prototype.error=function(n){this._steps=sircl._requestHandlers.onError.concat(this._steps);this.next(n)};$(document).ready(function(){sircl.singlePageMode=$(sircl.$mainTargetSelector).length>0;console.info("sircl.singlePageMode = "+sircl.singlePageMode+"");$(document.body).on("click","*[href]:not([download])",function(n){var t=this.getAttribute("href"),r,i;if(t!=="null"&&t!=="")if(t==="history:back")window.history.back();else if(t==="history:back-uncached")sircl.ext.$mainTarget().addClass("sircl-history-nocache-once"),window.history.back();else if(t==="history:refresh")location.reload();else if(t.indexOf("alert:")===0)sircl.ext.alert($(this),t.substr(6),null,!0);else if(t.indexOf("javascript:")===0)r=this.getAttribute("nonce"),r?jQuery.globalEval(t.substr(11),{nonce:r}):jQuery.globalEval(t.substr(11));else{if(this.tagName==="A"&&t.indexOf("#")===0)return;if(t.indexOf("#")===0)window.location.hash=t;else if(i=this.getAttribute("target"),i==null&&!sircl.singlePageMode||i!=null&&sircl.ext.isExternalTarget(i)){if(this.tagName==="A")return;i==null?window.location.href=t:window.open(t,i)}else sircl._loadUrl($(this),t)}n.preventDefault();n.stopPropagation()});$(document.body).on("click","form *:submit, *:submit[form]",function(){var n=this.hasAttribute("form")?document.getElementById(this.getAttribute("form")):$(this).closest("FORM")[0];clearTimeout(n._formTriggerTimer);n._formTrigger=this;n._formTriggerTimer=setTimeout(function(){n._formTrigger=null},700)});$(document.body).on("submit","form:not([download]):not([method=dialog])",function(n){var i=this._formTrigger?$(this._formTrigger):$(this),t=null,r=i.closest("[target]");(r.length>0&&(t=r.attr("target")),(t!=null||sircl.singlePageMode)&&(t==null||!sircl.ext.isExternalTarget(t)))&&(sircl._submitForm(i,$(this),n),n.preventDefault(),n.stopPropagation())});$(document.body).on("keydown","FORM[default-submit-button]",function(n){var t;n.keyCode==13?(t=$(this).find($(this).attr("default-submit-button"))[0],t!=null&&t.click(),n.preventDefault()):n.keyCode==27&&(t=$(this).find($(this).attr("default-cancel-button"))[0],t!=null&&t.click(),n.preventDefault())})});sircl._contentReadyHandlers={};sircl._contentReadyHandlers.before=[];sircl._contentReadyHandlers.content=[];sircl._contentReadyHandlers.enrich=[];sircl._contentReadyHandlers.process=[];sircl.addContentReadyHandler=function(n,t){this._contentReadyHandlers[n].push(t)};sircl.addAttributeAlias=function(n,t,i){sircl.addContentReadyHandler("enrich",function(){$(this).find(n).each(function(){$(this).attr(t,i)})})};sircl._beforeUnload=function(n){sircl._contentReadyHandlers.before.forEach(function(t){try{t.call(n)}catch(i){console.error(i);sircl.handleError("S100","Error executing a BeforeUnLoad handler: "+i,{exception:i,fx:t})}})};sircl._afterLoad=function(n){$(n).addClass("sircl-content-processing");sircl._contentReadyHandlers.content.forEach(function(t){try{t.call(n)}catch(i){console.error(i);sircl.handleError("S100","Error executing an AfterLoad content handler: "+i,{exception:i,fx:t})}});sircl._contentReadyHandlers.enrich.forEach(function(t){try{t.call(n)}catch(i){console.error(i);sircl.handleError("S100","Error executing an AfterLoad enrich handler: "+i,{exception:i,fx:t})}});sircl._contentReadyHandlers.process.forEach(function(t){try{t.call(n)}catch(i){console.error(i);sircl.handleError("S100","Error executing an AfterLoad process handler: "+i,{exception:i,fx:t})}});$(n).removeClass("sircl-content-processing")};$$("content",function(){$(this).find("*[onload-moveto]").each(function(){$($(this).attr("onload-moveto")).html($(this).html());$(this).html("")})});$$(function(){var n=$(this).find("[document-title]");n.length>0&&(document.title=n[0].getAttribute("document-title"));$(this).find("*[autofocus]:first").each(function(){try{this.focus()}catch(n){}try{this.select()}catch(n){}})});sircl.addAttributeAlias(".target","target",":this");sircl._errorHandlers=[];sircl.addErrorHandler=function(n){this._errorHandlers.push(n)};sircl.handleError=function(n,t,i){i=i||{};this._errorHandlers.forEach(function(r){try{r(n,t,i)}catch(u){}})};sircl.addErrorHandler(function(n,t,i){console.error("Sircl "+n+" - "+t,i)});sircl._afterHistoryHandlers=[];sircl.addAfterHistoryHandler=function(n){this._afterHistoryHandlers.push(n)};sircl._afterHistory=function(){this._afterHistoryHandlers.forEach(function(n){n()})};sircl.addRequestHandler("beforeRender",function(n){if(n._historyMode!="skip"&&n.method==="get"&&n.$finalTarget.is(sircl.ext.$mainTarget())){n._historyMode=n.getAttr("history")||"push";n._historyCached=n._historyMode.indexOf("cache")>=0;var t={url:window.location.href,html:n._historyCached?n.$finalTarget.html():"",cached:n._historyCached};window.history.replaceState(t,document.title,t.url)}this.next(n)});sircl.addRequestHandler("afterRender",function(n){if(n._historyMode){var t={url:n.action,html:"",cached:!1};n._historyMode.indexOf("push")>=0?(window.history.pushState(t,document.title,t.url),sircl._afterHistory()):n._historyMode.indexOf("replace")>=0&&(window.history.replaceState(t,document.title,t.url),sircl._afterHistory())}this.next(n)});$(function(){window.onpopstate=function(n){var t=n.state,i=null;t?(t.cached&&sircl.ext.$mainTarget().hasClass("sircl-history-nocache-once")?(sircl.ext.$mainTarget().removeClass("sircl-history-nocache-once"),t.cached=!1,i=function(){var n={url:window.location.href,html:sircl.ext.$mainTarget().html(),cached:!0};window.history.replaceState(n,document.title,n.url);sircl._afterHistory()}):i=function(){sircl._afterHistory()},t.cached?(sircl.ext.$mainTarget().html(t.html),sircl._afterHistory()):sircl._processRequest({$trigger:null,action:t.url,method:"get",_historyMode:"skip"},i)):window.history.go(0)};sircl._afterHistory()});sircl.addRequestHandler("beforeSend",function(n){if(n._spinner=!1,n.$trigger!=null&&n.$trigger.length==1&&n.$trigger[0].tagName!="FORM"){var t=n.$trigger.find(".spinner");t.length>0&&(n._spinner_to_restore=t[0].outerHTML,t[0].outerHTML=sircl.html_spinner)}this.next(n)});sircl.addRequestHandler("afterSend",function(n){n._spinner_to_restore&&(n.$trigger.find(".sircl-spinner")[0].outerHTML=n._spinner_to_restore);this.next(n)});sircl.addRequestHandler("beforeSend",function(n){n.$initialTarget.find(".overlay").each(function(){$(this).parent().css("position","relative");sircl.ext.visible(this,!0)});this.next(n)});sircl.addRequestHandler("afterSend",function(n){n.$initialTarget.find(".overlay").each(function(){sircl.ext.visible(this,!1)});this.next(n)});sircl.addRequestHandler("beforeSend",function(n){$(document.body).addClass("body-loading");n.$initialTarget.addClass("loading");this.next(n)});sircl.addRequestHandler("afterSend",function(n){$(document.body).removeClass("body-loading");n.$initialTarget.removeClass("loading");this.next(n)});$(document).ready(function(){$(window).on("beforeunload",function(){$(document.body).addClass("body-loading")})});sircl.addRequestHandler("beforeSend",function(n){var t,i;n._progressToResetAfterSend=[];n._progressToHideAfterSend=[];t=sircl.ext.$select(n.$initialTarget,n.$initialTarget.attr("upload-progress")).filter("PROGRESS");t.length>0&&(t.each(function(){this.removeAttribute("value");n._progressToResetAfterSend.push(this);sircl.ext.visible(this)||(n._progressToHideAfterSend.push(this),sircl.ext.visible(this,!0))}),n.xhr.upload.addEventListener("progress",function(n){n.lengthComputable&&t.each(function(){this.value=n.loaded/n.total})}));i=sircl.ext.$select(n.$initialTarget,n.$initialTarget.attr("download-progress")).filter("PROGRESS");i.length>0&&(i.each(function(){this.removeAttribute("value");n._progressToResetAfterSend.push(this);sircl.ext.visible(this)||(n._progressToHideAfterSend.push(this),sircl.ext.visible(this,!0))}),n.xhr.addEventListener("progress",function(n){n.lengthComputable&&i.each(function(){this.value=n.loaded/n.total})}));this.next(n)});sircl.addRequestHandler("afterSend",function(n){n._progressToHideAfterSend.forEach(function(n){sircl.ext.visible(n,!1)});n._progressToResetAfterSend.forEach(function(n){n.value=0});this.next(n)});sircl.addRequestHandler("beforeSend",function(n){n._dialogHtml5Opened=n.$initialTarget.closest("DIALOG.onload-showdialog:not([open])");n._dialogHtml5Opened.length>0&&(n._dialogHtml5Opened.hasClass("modal-dialog")?n._dialogHtml5Opened[0].showModal():n._dialogHtml5Opened[0].show());this.next(n)});sircl.addRequestHandler("afterSend",function(n){if(!n.succeeded&&n._dialogHtml5Opened.length>0)n._dialogHtml5Opened[0].close();else if(n.xhr.status=="204"){var t=n.$initialTarget.closest("DIALOG[open]");t.length>0&&t[0].close()}this.next(n)});sircl.addRequestHandler("beforeRender",function(n){n.targetHasChanged&&n._dialogHtml5Opened.length>0&&n._dialogHtml5Opened[0].close();var t=n.$finalTarget.closest("DIALOG:not([open])");t.length>0&&(t.hasClass("modal-dialog")?t[0].showModal():t[0].show());this.next(n)});$(document).ready(function(){$(document.body).on("close","DIALOG.onclose-restore",function(){var n=$(this)[0]._originalContent;n!==undefined&&$(this).html(n)})});$$(function(){$(this).find("DIALOG.onclose-restore").each(function(n,t){t._originalContent=$(t).html()})});sircl.addAttributeAlias(".oninput-change","oninput-changeafter","0.8");sircl.addAttributeAlias(".onchange-submit","onchange-submit",":form");$(function(){$(document.body).on("change","[onchange-submit]",function(n){if($(n.target).closest(".onchange-nosubmit").length==0&&$(n.target).closest(".sircl-content-processing").length==0){var t=sircl.ext.$select($(this),$(this).attr("onchange-submit"));t.length>0&&t[0].submit()}});$(document.body).on("input","INPUT[oninput-changeafter], TEXTAREA[oninput-changeafter]",function(){var n=1e3*$(this).attr("oninput-changeafter");this._oninput_changeafter_timeout&&clearTimeout(this._oninput_changeafter_timeout);this._oninput_changeafter_timeout=setTimeout(function(n){$(n).change()},n,this)});$(document.body).children().on("change","INPUT[oninput-changeafter], TEXTAREA[oninput-changeafter]",function(n){var t=$(this).val(),i=this._previousChangeValue;t===i?(n.preventDefault(),n.stopPropagation()):this._previousChangeValue=t})});sircl.addAttributeAlias(".onsubmit-disable","onsubmit-disable",">:submit");sircl.addRequestHandler("beforeSend",function(n){n.$form&&n.$form.hasAttr("onsubmit-disable")&&(n._formSubmitsToReenable=[],sircl.ext.$select(n.$form,n.$form.attr("onsubmit-disable")).filter(":enabled").each(function(){n._formSubmitsToReenable.push(this);this.disabled=!0}));this.next(n)});sircl.addRequestHandler("afterSend",function(n){n._formSubmitsToReenable&&n._formSubmitsToReenable.forEach(function(n){n.disabled=!1});this.next(n)});sircl.addAttributeAlias(".onload-click","onload-click",":this");$$("enrich",function(){$(this).find(".onload-setvaluefromquery").each(function(){$(this).attr("onload-setvaluefromquery",this.name)})});$$(function(){$(this).closest(".onload-show").each(function(){sircl.ext.visible(this,!0)});$(this).closest(".onload-hide").each(function(){sircl.ext.visible(this,!1)});$(this).closest("[onload-click]").each(function(){sircl.ext.$select($(this),$(this).attr("onload-click")).click()});$(this).find("[onload-load]").each(function(){var n=$(this).attr("onload-load")+"",t=$(this).attr("onload-reloadafter");$(this).load(n.replace("{rnd}",Math.random()));t&&window.setInterval(function(t){t.load(n.replace("{rnd}",Math.random()))},t*1e3,$(this))});$(this).find("[onload-reload]").each(function(){sircl.ext.$select($(this).attr("onload-reload")).filter("[onload-load]").each(function(){var n=$(this).attr("onload-load")+"";$(this).load(n.replace("{rnd}",Math.random()))})});$(this).find("[onload-setvaluefromquery]").each(function(){$(this).attr("value",sircl.ext.getUrlParameter($(this).attr("onload-setvaluefromquery")))})});$(document).ready(function(){sircl._afterLoad(this)});typeof sircl=="undefined"&&console.warn("The file 'sircl-extended' component should be registered after the 'sircl' component. Please review order of script files.");$$(function(){$(this).find("[onload-removeclass]").each(function(){sircl.ext.removeClass($(this),$(this).attr("onload-removeclass"))});$(this).find("[onload-addclass]").each(function(){sircl.ext.addClass($(this),$(this).attr("onload-addclass"))});$(this).find("[onload-toggleclass]").each(function(){sircl.ext.toggleClass($(this),$(this).attr("onload-toggleclass"))});$(this).find("SELECT[onload-select]").each(function(){var r,t,i,u,n;if($(this).val()=="")if(r=$(this).attr("onload-select")+"",t=$("option",this),r.toLowerCase()==":singleton"){for(i=-1,n=0;n<t.length;n++)if(t[n].value!=""&&i==-1)i=n;else if(t[n].value!="")return;i!=-1&&($(this).val(t[i].value),$(this).change())}else if(r.toLowerCase()==":first"){for(u=-1,n=0;n<t.length;n++)if(t[n].value!=""){$(this).val(t[n].value);$(this).change();break}}else $(this).val(r),$(this).change()})});$(function(){$(document.body).on("click","*[onclick-click]",function(){var n=$(this).attr("onclick-click");sircl.ext.$select($(this),n)[0].click()});$(document.body).on("click","[onclick-clear]",function(){sircl.ext.$select($(this),$(this).attr("onclick-clear")).html("")});$(document.body).on("click","[onclick-show]",function(){sircl.ext.visible(sircl.ext.$select($(this),$(this).attr("onclick-show")),!0)});$(document.body).on("click","[onclick-hide]",function(){sircl.ext.visible(sircl.ext.$select($(this),$(this).attr("onclick-hide")),!1)});$(document.body).on("click","[onclick-toggleshow]",function(){sircl.ext.$select($(this),$(this).attr("onclick-toggleshow")).each(function(){sircl.ext.visible($(this),!sircl.ext.visible($(this)))})});$(document.body).on("click","[onclick-removeclass]",function(){sircl.ext.removeClass($(this),$(this).attr("onclick-removeclass"))});$(document.body).on("click","[onclick-addclass]",function(){sircl.ext.addClass($(this),$(this).attr("onclick-addclass"))});$(document.body).on("click","[onclick-toggleclass]",function(){sircl.ext.toggleClass($(this),$(this).attr("onclick-toggleclass"))});$(document.body).on("click","[onclick-disable]",function(){sircl.ext.$select($(this),$(this).attr("onclick-disable")).prop("disabled",!0)});$(document.body).on("click","[onclick-enable]",function(){sircl.ext.$select($(this),$(this).attr("onclick-enable")).prop("disabled",!1)});$(document.body).on("click","[onclick-readonly]",function(){sircl.ext.$select($(this),$(this).attr("onclick-readonly")).prop("readonly",!0)});$(document.body).on("click","[onclick-readwrite]",function(){sircl.ext.$select($(this),$(this).attr("onclick-readwrite")).prop("readonly",!1)});$(document.body).on("click","[onclick-clearvalue]",function(){sircl.ext.$select($(this),$(this).attr("onclick-clearvalue")).each(function(){$(this).val("");$(this).change()})});$(document.body).on("click","[onclick-check]",function(){sircl.ext.$select($(this),$(this).attr("onclick-check")).filter("INPUT[type=checkbox]").each(function(){this.checked=!0;$(this).change()})});$(document.body).on("click","[onclick-uncheck]",function(){sircl.ext.$select($(this),$(this).attr("onclick-uncheck")).filter("INPUT[type=checkbox]").each(function(){this.checked=!1;$(this).change()})});$(document.body).on("click","[onclick-togglecheck]",function(){sircl.ext.$select($(this),$(this).attr("onclick-togglecheck")).filter("INPUT[type=checkbox]").each(function(){this.checked=!this.checked;$(this).change()})})});$(function(){$(document.body).on("mouseenter","*[onhover-show]",function(){sircl.ext.visible(sircl.ext.$select($(this),$(this).attr("onhover-show")),!0)});$(document.body).on("mouseleave","*[onhover-show]",function(){sircl.ext.visible(sircl.ext.$select($(this),$(this).attr("onhover-show")),!1)});$(document.body).on("mouseenter","*[onhover-hide]",function(){sircl.ext.visible(sircl.ext.$select($(this),$(this).attr("onhover-hide")),!1)});$(document.body).on("mouseleave","*[onhover-hide]",function(){sircl.ext.visible(sircl.ext.$select($(this),$(this).attr("onhover-hide")),!0)});$(document.body).on("mouseenter","*[onhover-removeclass]",function(){sircl.ext.removeClass($(this),$(this).attr("onhover-removeclass"))});$(document.body).on("mouseleave","*[onhover-removeclass]",function(){sircl.ext.addClass($(this),$(this).attr("onhover-removeclass"))});$(document.body).on("mouseenter","*[onhover-addclass]",function(){sircl.ext.addClass($(this),$(this).attr("onhover-addclass"))});$(document.body).on("mouseleave","*[onhover-addclass]",function(){sircl.ext.removeClass($(this),$(this).attr("onhover-addclass"))});$(document.body).on("mouseenter","*[onhover-toggleclass]",function(){sircl.ext.toggleClass($(this),$(this).attr("onhover-toggleclass"))});$(document.body).on("mouseleave","*[onhover-toggleclass]",function(){sircl.ext.toggleClass($(this),$(this).attr("onhover-toggleclass"))})});$(function(){$(document.body).children().on("change","*[onchecked-click]:checked",function(){var n=$(this).attr("onclick-click");sircl.ext.$select($(this),n)[0].click()});$(document.body).children().on("change","[ifchecked-show]",function(){sircl.ext.visible(sircl.ext.$select($(this),this.getAttribute("ifchecked-show")),this.checked)});$(document.body).children().on("change","[ifchecked-hide]",function(){sircl.ext.visible(sircl.ext.$select($(this),this.getAttribute("ifchecked-hide")),!this.checked)});$(document.body).children().on("change","[ifchecked-enable]",function(){sircl.ext.$select($(this),this.getAttribute("ifchecked-enable")).prop("disabled",!this.checked)});$(document.body).children().on("change","[ifchecked-disable]",function(){sircl.ext.$select($(this),this.getAttribute("ifchecked-disable")).prop("disabled",this.checked)});$(document.body).children().on("change","[ifchecked-readonly]",function(){sircl.ext.$select($(this),this.getAttribute("ifchecked-readonly")).prop("readonly",this.checked)});$(document.body).children().on("change","[ifchecked-readwrite]",function(){sircl.ext.$select($(this),this.getAttribute("ifchecked-readwrite")).prop("readonly",!this.checked)});$(document.body).children().on("change","[ifchecked-clearvalue]",function(){this.checked&&sircl.ext.$select($(this),this.getAttribute("ifchecked-clearvalue")).each(function(){$(this).val("");$(this).change()})});$(document.body).children().on("change","[ifunchecked-clearvalue]",function(){this.checked||sircl.ext.$select($(this),this.getAttribute("ifunchecked-clearvalue")).each(function(){$(this).val("");$(this).change()})});$(document.body).children().on("change","[ifchecked-check]",function(){this.checked&&sircl.ext.$select($(this),this.getAttribute("ifchecked-check")).filter(":not(:checked)").each(function(){$(this).prop("checked",!0);$(this).change()})});$(document.body).children().on("change","[ifchecked-uncheck]",function(){this.checked&&sircl.ext.$select($(this),this.getAttribute("ifchecked-uncheck")).filter(":checked").each(function(){$(this).prop("checked",!1);$(this).change()})});$(document.body).children().on("change","[ifunchecked-check]",function(){this.checked||sircl.ext.$select($(this),this.getAttribute("ifunchecked-check")).filter(":not(:checked)").each(function(){$(this).prop("checked",!0);$(this).change()})});$(document.body).children().on("change","[ifunchecked-uncheck]",function(){this.checked||sircl.ext.$select($(this),this.getAttribute("ifunchecked-uncheck")).filter(":checked").each(function(){$(this).prop("checked",!1);$(this).change()})});$(document.body).children().on("change",".byvalue-events",function(){var n=$("BODY"),u=[],f=[],s=sircl.ext.cssEscape(this.name),t=".ifvalue"+s,r,e,o,i;for(n.find(t+"-show").each(function(){sircl.ext.visible($(this),!0)}),n.find(t+"-hide").each(function(){sircl.ext.visible($(this),!1)}),n.find(t+"-enable").each(function(){$(this).prop("disabled",!1)}),n.find(t+"-disable").each(function(){$(this).prop("disabled",!0)}),n.find(t+"-readonly").each(function(){$(this).prop("readonly",!0)}),n.find(t+"-readwrite").each(function(){$(this).prop("readonly",!1)}),n.find(t+"-clearvalue").each(function(){$(this).val("");$(this).change()}),n.find(t+"-check").each(function(){this.checked||u.push(this)}),n.find(t+"-uncheck").each(function(){this.checked&&f.push(this)}),r=$(this).val(),r==null&&(r=[]),Array.isArray(r)||(r=[r]),e=0;e<r.length;e++)o=sircl.ext.cssEscape(r[e]),i=t+"is"+o,n.find(i+"-show").each(function(){sircl.ext.visible($(this),!0)}),n.find(i+"-hide").each(function(){sircl.ext.visible($(this),!1)}),n.find(i+"-enable").each(function(){$(this).prop("disabled",!1)}),n.find(i+"-disable").each(function(){$(this).prop("disabled",!0)}),n.find(i+"-readonly").each(function(){$(this).prop("readonly",!0)}),n.find(i+"-readwrite").each(function(){$(this).prop("readonly",!1)}),n.find(i+"-clearvalue").each(function(){$(this).val("");$(this).change()}),n.find(i+"-check").each(function(){f.indexOf(this)>=0&&f.splice(f.indexOf(this),1);this.checked||u.indexOf(this)!==-1||u.push(this)}),n.find(i+"-uncheck").each(function(){u.indexOf(this)>=0&&u.splice(u.indexOf(this),1);this.checked&&f.indexOf(this)===-1&&f.push(this)});u.forEach(function(n){n.checked=!0;$(n).change()});f.forEach(function(n){n.checked=!1;$(n).change()})})});$$(function(){$(this).find("[ifchecked-show]").each(function(){sircl.ext.visible(sircl.ext.$select($(this),this.getAttribute("ifchecked-show")),this.checked)});$(this).find("[ifchecked-hide]").each(function(){sircl.ext.visible(sircl.ext.$select($(this),this.getAttribute("ifchecked-hide")),!this.checked)});$(this).find("[ifchecked-enable]").each(function(){sircl.ext.$select($(this),this.getAttribute("ifchecked-enable")).prop("disabled",!this.checked)});$(this).find("[ifchecked-disable]").each(function(){sircl.ext.$select($(this),this.getAttribute("ifchecked-disable")).prop("disabled",this.checked)});$(this).find("[ifchecked-readonly]",function(){sircl.ext.$select($(this),this.getAttribute("ifchecked-readonly")).prop("readonly",this.checked)});$(this).find("[ifchecked-readwrite]",function(){sircl.ext.$select($(this),this.getAttribute("ifchecked-readwrite")).prop("readonly",!this.checked)});$(this).find("[ifchecked-clearvalue]",function(){this.checked&&sircl.ext.$select($(this),this.getAttribute("ifchecked-clearvalue")).each(function(){$(this).val("");$(this).change()})});$(this).find("[ifunchecked-clearvalue]",function(){this.checked||sircl.ext.$select($(this),this.getAttribute("ifunchecked-clearvalue")).each(function(){$(this).val("");$(this).change()})});$(this).find("[ifchecked-check]").each(function(){this.checked&&sircl.ext.$select($(this),this.getAttribute("ifchecked-check")).filter(":not(:checked)").each(function(){$(this).prop("checked",!0);$(this).change()})});$(this).find("[ifchecked-uncheck]").each(function(){this.checked&&sircl.ext.$select($(this),this.getAttribute("ifchecked-uncheck")).filter(":checked").each(function(){$(this).prop("checked",!1);$(this).change()})});$(this).find("[ifunchecked-check]").each(function(){this.checked||sircl.ext.$select($(this),this.getAttribute("ifunchecked-check")).filter(":not(:checked)").each(function(){$(this).prop("checked",!0);$(this).change()})});$(this).find("[ifunchecked-uncheck]").each(function(){this.checked||sircl.ext.$select($(this),this.getAttribute("ifunchecked-uncheck")).filter(":checked").each(function(){$(this).prop("checked",!1);$(this).change()})});$(this).find(".byvalue-events").each(function(){var n=$("BODY"),u=[],f=[],s=sircl.ext.cssEscape(this.name),t=".ifvalue"+s,r,e,o,i;for(n.find(t+"-show").each(function(){sircl.ext.visible($(this),!0)}),n.find(t+"-hide").each(function(){sircl.ext.visible($(this),!1)}),n.find(t+"-enable").each(function(){$(this).prop("disabled",!1)}),n.find(t+"-disable").each(function(){$(this).prop("disabled",!0)}),n.find(t+"-readonly").each(function(){$(this).prop("readonly",!0)}),n.find(t+"-readwrite").each(function(){$(this).prop("readonly",!1)}),n.find(t+"-clearvalue").each(function(){$(this).val("");$(this).change()}),n.find(t+"-check").each(function(){this.checked||u.push(this)}),n.find(t+"-uncheck").each(function(){this.checked&&f.push(this)}),r=$(this).val(),r==null&&(r=[]),Array.isArray(r)||(r=[r]),e=0;e<r.length;e++)o=sircl.ext.cssEscape(r[e]),i=t+"is"+o,n.find(i+"-show").each(function(){sircl.ext.visible($(this),!0)}),n.find(i+"-hide").each(function(){sircl.ext.visible($(this),!1)}),n.find(i+"-enable").each(function(){$(this).prop("disabled",!1)}),n.find(i+"-disable").each(function(){$(this).prop("disabled",!0)}),n.find(i+"-readonly").each(function(){$(this).prop("readonly",!0)}),n.find(i+"-readwrite").each(function(){$(this).prop("readonly",!1)}),n.find(i+"-clearvalue").each(function(){$(this).val("");$(this).change()}),n.find(i+"-check").each(function(){f.indexOf(this)>=0&&f.splice(f.indexOf(this),1);this.checked||u.indexOf(this)!==-1||u.push(this)}),n.find(i+"-uncheck").each(function(){u.indexOf(this)>=0&&u.splice(u.indexOf(this),1);this.checked&&f.indexOf(this)===-1&&f.push(this)});u.forEach(function(n){n.checked=!0;$(n).change()});f.forEach(function(n){n.checked=!1;$(n).change()})});$(this).find("[enable-ifchecked]").each(function(){var n=$(this);sircl.ext.$select(n,n.attr("enable-ifchecked")).on("change",function(){n.prop("disabled",!sircl.ext.$select(n,n.attr("enable-ifchecked")).filter(":checked").length>0)});n.prop("disabled",!sircl.ext.$select(n,n.attr("enable-ifchecked")).filter(":checked").length>0)})});sircl.ext.isValid=function(n){for(var r,i,u=["BUTTON","FIELDSET","INPUT","OUTPUT","SELECT","TEXTAREA"],t=0;t<n.length;t++)if(u.indexOf(n[t].tagName)>=0){if(!n[t].validity.valid)return!1}else for(r=$(n[t]).find("BUTTON,FIELDSET,INPUT,OUTPUT,SELECT,TEXTAREA"),i=0;i<r.length;i++)if(!r[i].validity.valid)return!1;return!0};$$(function(){$(this).find("[ifvalid-show]").each(function(){sircl.ext.visible(sircl.ext.$select($(this),this.getAttribute("ifvalid-show")),sircl.ext.isValid($(this)))});$(this).find("[ifinvalid-show]").each(function(){sircl.ext.visible(sircl.ext.$select($(this),this.getAttribute("ifinvalid-show")),!sircl.ext.isValid($(this)))});$(this).find("[ifvalid-addclass]").each(function(){sircl.ext.isValid($(this))?sircl.ext.addClass($(this),this.getAttribute("ifvalid-addclass")):sircl.ext.removeClass($(this),this.getAttribute("ifvalid-addclass"))});$(this).find("[ifinvalid-addclass]").each(function(){sircl.ext.isValid($(this))?sircl.ext.removeClass($(this),this.getAttribute("ifinvalid-addclass")):sircl.ext.addClass($(this),this.getAttribute("ifinvalid-addclass"))});$(this).find("[ifvalid-enable]").each(function(){sircl.ext.$select($(this),this.getAttribute("ifvalid-enable")).prop("disabled",!sircl.ext.isValid($(this)))});$(this).find("[ifinvalid-enable]").each(function(){sircl.ext.$select($(this),this.getAttribute("ifinvalid-enable")).prop("disabled",sircl.ext.isValid($(this)))})});$(function(){$(document.body).on("change","[ifvalid-show]",function(){sircl.ext.visible(sircl.ext.$select($(this),this.getAttribute("ifvalid-show")),sircl.ext.isValid($(this)))});$(document.body).on("change","[ifinvalid-show]",function(){sircl.ext.visible(sircl.ext.$select($(this),this.getAttribute("ifinvalid-show")),!sircl.ext.isValid($(this)))});$(document.body).on("change","[ifvalid-addclass]",function(){sircl.ext.isValid($(this))?sircl.ext.addClass($(this),this.getAttribute("ifvalid-addclass")):sircl.ext.removeClass($(this),this.getAttribute("ifvalid-addclass"))});$(document.body).on("change","[ifinvalid-addclass]",function(){sircl.ext.isValid($(this))?sircl.ext.removeClass($(this),this.getAttribute("ifinvalid-addclass")):sircl.ext.addClass($(this),this.getAttribute("ifinvalid-addclass"))});$(document.body).on("change","[ifvalid-enable]",function(){sircl.ext.$select($(this),this.getAttribute("ifvalid-enable")).prop("disabled",!sircl.ext.isValid($(this)))});$(document.body).on("change","[ifinvalid-enable]",function(){sircl.ext.$select($(this),this.getAttribute("ifinvalid-enable")).prop("disabled",sircl.ext.isValid($(this)))})});$(document.body).on("focus","INPUT.onfocus-select:not([type=checkbox]):not([type=radio]:not([type=button])",function(){$(this)[0].select()});$(function(){$(document.body).children().on("click","*[onclick-propagate=off]",function(n){n.stopPropagation()});$(document.body).children().on("dblclick","*[ondblclick-propagate=off]",function(n){n.stopPropagation()});$(document.body).children().on("change","*[onchange-propagate=off]",function(n){n.stopPropagation()});$(document.body).children().on("input","*[oninput-propagate=off]",function(n){n.stopPropagation()})});sircl.isElementInViewport=function(n){var t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)};$(function(){$(window).on("DOMContentLoaded load resize scroll",function(){$(this).scrollTop()>100?$(".onscrolltop-fade").fadeIn(800):$(".onscrolltop-fade").fadeOut(400);$("[ifinviewport-load]").each(function(){if(sircl.isElementInViewport(this)){var n=$(this).attr("ifinviewport-load");$(this).removeAttr("ifinviewport-load");$(this).load(n)}})});$(document.body).on("click",".onclick-scrolltop",function(){return $("body,html").animate({scrollTop:0},500),!1})});$$(function(){$("[ifinviewport-load]").each(function(){if(sircl.isElementInViewport(this)){var n=$(this).attr("ifinviewport-load");$(this).removeAttr("ifinviewport-load");$(this).load(n)}})});$(function(){$(document.body).children().on("click","*[onclick-confirm]",function(n){var t=$(this).attr("onclick-confirm");t&&(sircl.ext.confirm($(this),t,n)||(n.stopPropagation(),n.preventDefault()))})});$$(function(){$(this).find("FORM[onchange-set]").each(function(){var n=$(this).find("INPUT[name="+$(this).attr("onchange-set")+"]");n.length>0&&["true","on"].indexOf((n.val()||"false").toLowerCase())>=0&&$(this).addClass("form-changed")})});$(function(){$(document.body).on("change","FORM[onchange-set]",function(n){if($(n.target).closest(".sircl-content-processing").length==0){$(this).addClass("form-changed");var t=$(this).find("INPUT[name="+$(this).attr("onchange-set")+"]");t.length>0&&t.val(!0)}});$(document.body).children().on("click","*[href]:not(.onunloadchanged-allow):not([download])",function(n){var t=$("FORM.form-changed[onunloadchanged-confirm]"),i;t.length>0&&(i=t[0].getAttribute("onunloadchanged-confirm"),sircl.ext.confirm($(this),i,n)||(n.stopPropagation(),n.preventDefault()))});$(document.body).children().on("click","FORM.form-changed *[onclickchanged-confirm]",function(n){var t=$(this).attr("onclickchanged-confirm");sircl.ext.confirm($(this),t,n)||(n.stopPropagation(),n.preventDefault())})});typeof sircl=="undefined"&&console.warn("The file 'sircl-changeactions' component should be registered after the 'sircl' component. Please review order of script files.");sircl.disableOnAction=!1;sircl._changeActionHandlers={};sircl._changeActionHandlers.beforeSend=[];sircl._changeActionHandlers.afterSend=[];sircl._changeActionHandlers.onError=[];sircl._changeActionHandlers.beforeRender=[];sircl._changeActionHandlers.afterRender=[];sircl.addChangeActionHandler=function(n,t){sircl._changeActionHandlers[n].push(t)};sircl._runChangeActionHandlers=function(n,t,i){sircl._changeActionHandlers[n].forEach(function(n){n.apply(t,[i])})};sircl._actionCall=function(n,t,i,r,u,f,e,o,s,h,c){var w,a,b,y,p,k,l,nt;if(!($(e.target).closest(".sircl-content-processing").length>0)){var d=($(n).closest("[method]").attr("method")||"get").toUpperCase()=="POST"?"POST":"GET",g=new RegExp(/\%5B[a-z0-9\.\-\_]+?\%5D/gi),v=[];do if(w=g.exec(r),w!==null)v.push(w[0]);else break;while(1);for(a=0;a<v.length;a++)b=$("[name="+v[a].substr(3,v[a].length-6)+"]").val(),r=b===undefined?r.replace(v[a],""):r.replace(v[a],encodeURIComponent(b));for((f===null||f===undefined)&&(f=[]),Array.isArray(f)||(f=[f]),y="name="+encodeURIComponent(u),p=0;p<f.length;p++)y+="&value="+encodeURIComponent(f[p]),u!=""&&(y+="&"+encodeURIComponent(u)+"="+encodeURIComponent(f[p]));d==="GET"&&(r=r+(r.indexOf("?")<0?"?":"&")+y,y=null);k=!1;$(n).attr("browser-cache")!=null&&(k=$(n).attr("browser-cache").toLowerCase()=="on");l={$trigger:$(n),$subjects:t,$scope:i,event:e};nt=$.ajax({url:r,method:d,data:y,cache:k,beforeSend:function(t){l.xhr=t;sircl._runChangeActionHandlers("beforeSend",n,l)}}).done(function(t,i,r){l.succeeded=l.xhr.status<=299?!0:!1;l.data=t;sircl._runChangeActionHandlers("afterSend",n,l);sircl._runChangeActionHandlers("beforeRender",n,l);l.succeeded||sircl._runChangeActionHandlers("onError",n,l);l.succeeded?(r.getResponseHeader("Content-Type")||"").indexOf("text/html")==0?s&&s.apply(n,[l]):o&&o.apply(n,[l]):h&&h.apply(n);sircl._runChangeActionHandlers("afterRender",n,l);l.succeeded||sircl.handleError("S101","Change action request failed.",l)}).fail(function(t){l.succeeded=!1;l.data=null;sircl._runChangeActionHandlers("afterSend",n,l);sircl._runChangeActionHandlers("beforeRender",n,l);l.succeeded||sircl._runChangeActionHandlers("onError",n,l);l.succeeded?(t.getResponseHeader("Content-Type")||"").indexOf("text/html")==0?s&&s.apply(n,[l]):o&&o.apply(n,[l]):h&&h.apply(n);sircl._runChangeActionHandlers("afterRender",n,l);l.succeeded||sircl.handleError("S101","Change action request failed.",l)}).always(function(){c&&c.apply(n)})}};$(function(){$(document.body).on("change","INPUT[type=radio][onchange-action]",function(n){var t=$(this);sircl._actionCall(this,t,t,t.attr("onchange-action"),this.name,t.prop("checked"),n,function(){this._previousActionValue=t.prop("checked")},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){t.prop("checked",!t.prop("checked"))})});$(document.body).on("change","[onchange-action] INPUT[type=radio]:not([onchange-action])",function(n){var r=$(this),i=r.closest("[onchange-action]"),t=i.find("INPUT[type=radio][name="+this.name+"]:not([onchange-action])");sircl._actionCall(this,t,i,i.attr("onchange-action"),this.name,jQuery.makeArray(t.filter(":checked")).map(function(n){return n.value}),n,function(n){var i=n.data;Array.isArray(i)&&i.length>0&&(i=i[0]);i===undefined?t[0]._previousActionValue=this.value:i==null||i==""?(t.prop("checked",!1),t[0]._previousActionValue=null):(t.filter("[value="+i+"]").prop("checked",!0),t[0]._previousActionValue=i)},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){var n=i.find("INPUT[type=radio][name="+this.name+"]:not([onchange-action]):first")[0]._previousActionValue;n?i.find("INPUT[type=radio][name="+this.name+"][value="+n+"]:not([onchange-action])").prop("checked",!0):i.find("INPUT[type=radio][name="+this.name+"]:not([onchange-action])").prop("checked",!1)})});$(document.body).on("change","INPUT[type=checkbox][onchange-action]",function(n){var t=$(this);sircl._actionCall(this,t,t,t.attr("onchange-action"),this.name,t.prop("checked"),n,function(){this._previousActionValue=t.prop("checked")},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){t.prop("checked",!t.prop("checked"))})});$(document.body).on("change","[onchange-action] INPUT[type=checkbox]:not([onchange-action])",function(n){var t=$(this),i=t.closest("[onchange-action]"),r=i.find("INPUT[type=checkbox][name="+this.name+"]:not([onchange-action])");sircl._actionCall(this,r,i,i.attr("onchange-action"),this.name,jQuery.makeArray(i.find("INPUT[type=checkbox][name="+this.name+"]:checked:not([onchange-action])")).map(function(n){return n.value}),n,function(n){var i=n.data;typeof i=="string"&&(i=[i]);Array.isArray(i)?r.each(function(){var n=i.indexOf(this.value)>=0;$(this).prop("checked",n);this._previousActionValue=n}):this._previousActionValue=t.prop("checked")},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){t.prop("checked",!t.prop("checked"))})});$(document.body).on("change","INPUT[onchange-action]:not([type=checkbox]):not([type=radio]), [onchange-action] INPUT:not([type=checkbox]):not([type=radio]):not([onchange-action]), SELECT[onchange-action], [onchange-action] SELECT:not([onchange-action]), TEXTAREA[onchange-action], [onchange-action] TEXTAREA:not([onchange-action])",function(n){var t=$(this),i=t.closest("[onchange-action]");sircl._actionCall(this,t,i,i.attr("onchange-action"),this.name,t.val(),n,function(n){var i=n.data;i&&t.val(i);this._previousActionValue=t.val()},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)},function(){t.val(this._previousActionValue)})});$(document.body).on("focusin","INPUT[onfocusin-action]:not([type=checkbox]):not([type=radio]), [onfocusin-action] INPUT:not([type=checkbox]):not([type=radio]):not([onfocusout-action]), TEXTAREA[onfocusin-action], [onfocusin-action] TEXTAREA:not([onfocusout-action])",function(n){var t=$(this),i=t.closest("[onfocusin-action]");sircl._actionCall(this,t,i,i.attr("onfocusin-action"),this.name,t.val(),n,function(n){var i=n.data;if(i){t.val(i);try{this.select()}catch(r){}}},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)})});$(document.body).on("focusout","INPUT[onfocusout-action]:not([type=checkbox]):not([type=radio]), [onfocusout-action] INPUT:not([type=checkbox]):not([type=radio]):not([onfocusout-action]), TEXTAREA[onfocusout-action], [onfocusout-action] TEXTAREA:not([onfocusout-action])",function(n){var t=$(this),i=t.closest("[onfocusout-action]");sircl._actionCall(this,t,i,i.attr("onfocusout-action"),this.name,t.val(),n,function(n){var i=n.data;i&&t.val(i)},function(n){sircl.ext.$select(n.$scope,n.$scope.attr("target")).html(n.data)})})});$$(function(){$(this).find("INPUT[onchange-action]").each(function(){this._previousActionValue=$(this).is("[type=radio]")?$(this).prop("checked"):$(this).is("[type=checkbox]")?$(this).prop("checked"):$(this).val()});$(this).find("[onchange-action] INPUT:not([onchange-action])").each(function(){var n=$(this).closest("[onchange-action]");$(this).is("[type=radio]")?n.find("INPUT[type=radio][name="+this.name+"]:not([onchange-action]):first")[0]._previousActionValue=$("INPUT[type=radio][name="+this.name+"]:not([onchange-action]):checked").val():this._previousActionValue=$(this).is("[type=checkbox]")?$(this).prop("checked"):$(this).val()});$(this).find("TEXTAREA[onchange-action], [onchange-action] TEXTAREA:not([onchange-action])").each(function(){this._previousActionValue=$(this).val()});$(this).find("SELECT[onchange-action], [onchange-action] SELECT:not([onchange-action])").each(function(){this._previousActionValue=$(this).val()})});sircl.addChangeActionHandler("afterSend",function(n){var t=n.xhr.getResponseHeader("X-Sircl-Alert-Message");t&&sircl.ext.alert(n.$trigger,t,null,!0)});sircl.addChangeActionHandler("beforeSend",function(n){n._elemetsDisabled=sircl.disableOnAction&&n.event.type!="focusin"&&n.event.type!="focusout"&&n.event.type!="input"?n.$subjects.filter(":not(:disabled)"):$(null);n._elemetsDisabled.prop("disabled",!0)});sircl.addChangeActionHandler("afterSend",function(n){n._elemetsDisabled.prop("disabled",!1)});sircl.addChangeActionHandler("beforeSend",function(n){n.$scope.addClass("action-pending")});sircl.addChangeActionHandler("afterSend",function(n){n.$scope.removeClass("action-pending")});typeof sircl=="undefined"&&console.warn("The file 'sircl-contextmenu' component should be registered after the 'sircl' component. Please review order of script files.");sircl.addRequestHandler("beforeSend",function(n){$(".contextmenu").css("display","none");this.next(n)});$$(function(){$(this).find(".contextmenu").each(function(){var t=$(this),n=$($(this).attr("contextmenu-for"));n.length==0&&(n=$(this).parent());n.on("contextmenu",function(n){var i=!1;$(".contextmenu").each(function(){$(this).css("display")!="none"&&($(this).css("display","none"),i=!0)});i||t.css("top",n.pageY-window.pageYOffset+"px").css("left",n.pageX-window.pageXOffset+"px").css("position","fixed").css("display","block");n.stopPropagation();n.preventDefault()});n.on("click",function(){$(".contextmenu").each(function(){$(this).css("display")!="none"&&$(this).css("display","none")})})})});